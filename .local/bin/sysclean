#!/bin/bash

# ================================================
# ARCH-MECHANIC CLEANUP SCRIPT 完
# "Sistemi ilk g羹nk羹 safl覺覺na d繹nd羹r羹r"
# ================================================

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${BLUE}>>> Temizlik operasyonu bal覺yor...${NC}"

# 1. Paket nbellei Temizlii (pacman & yay)
echo -e "${YELLOW}[1/4] Paket 繹nbellei temizleniyor...${NC}"
sudo pacman -Sc --noconfirm
yay -Sc --noconfirm

# 2. Yetim Paketlerin (Orphans) Kald覺r覺lmas覺
if [ -n "$(pacman -Qtdq)" ]; then
    echo -e "${YELLOW}[2/4] Yetim paketler kald覺r覺l覺yor...${NC}"
    sudo pacman -Rns $(pacman -Qtdq) --noconfirm
else
    echo -e "${GREEN}[2/4] Yetim paket bulunamad覺.${NC}"
fi

# 3. Config Yedeklerinin (.bak) ve Loglar覺n Temizlii
echo -e "${YELLOW}[3/4] Gereksiz yedek dosyalar覺 ve loglar taran覺yor...${NC}"

# .bak , .tmp ve eski log dosyalar覺n覺 sil
find ~/.config -name "*.bak" -type f -delete
find ~/.config -name "*.tmp" -type f -delete
find ~/.local/state -name "*.log" -type f -mtime +30 -delete

# KDE kal覺nt覺lar覺 (Zsh ge癟miinde g繹rd羹羹m羹z o mehur temizlik)
rm -f ~/.config/kdeglobals
rm -f ~/.config/kiorc
rm -f ~/.config/ktrashrc
rm -f ~/.config/dolphinrc

echo -e "${GREEN}>>> Gereksiz dosyalar temizlendi.${NC}"

# 4. Thumbnail (K羹癟羹k Resim) ve nbellek Temizlii
echo -e "${YELLOW}[4/4] Thumbnail ve genel cache temizleniyor...${NC}"
rm -rf ~/.cache/thumbnails/*
# 襤stee bal覺: 30 g羹nden eski cache dosyalar覺n覺 sil
find ~/.cache -type f -atime +30 -delete

echo -e "${BLUE}==================================================${NC}"
echo -e "${GREEN}   TEM襤ZL襤K TAMAMLANDI! Sistemin mermi gibi.   ${NC}"
echo -e "${BLUE}==================================================${NC}"
